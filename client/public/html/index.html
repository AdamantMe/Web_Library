<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog Post Manager</title>
  <link rel="stylesheet" href="../css/styles.css">
</head>

<body x-data="{ dark: false }" x-bind:class="{ 'dark': dark }">
  <div id="user-info">
    <span id="username-display"></span>
    <button id="logout-button">Logout</button>
    <button id="theme-button" x-data="{ dark: false }" @click="dark = !dark">Switch Theme</button>
  </div>

  <div class="container">
    <h1>Blog Post Manager</h1>

    <!-- Create Post Form -->
    <h2>Create Post</h2>
    <form id="createPostForm" class="post-form">
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>
      </div>
      <div class="form-group">
        <label for="body">Body:</label>
        <textarea id="body" name="body" rows="5" required></textarea>
      </div>
      <input type="submit" value="Create Post">
    </form>

    <!-- Posts List -->
    <h2>Posts</h2>
    <div id="posts" class="posts-list"></div>
  </div>

  <form id="updatePostForm" class="post-form" style="display:none;">
    <input type="hidden" id="updateUuid">
    <div class="form-group">
      <label for="updateTitle">Title:</label>
      <input type="text" id="updateTitle" name="title" required>
    </div>
    <div class="form-group">
      <label for="updateBody">Body:</label>
      <textarea id="updateBody" name="body" rows="5" required></textarea>
    </div>
    <input type="submit" value="Update Post">
    <button type="button" class="cancel-button" onclick="cancelUpdate()">Cancel</button>
  </form>

  <script src="../js/script.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>
</body>

</html>

<template id="post-template">
  <div class="post" x-data="{ hover: false, open: false, yes: false }">
    <div class="post-content">
      <h3></h3>
      <p></p>
      <button class="edit" @mouseover="hover = true" @mouseleave="hover = false"
        x-bind:class="{ 'hover-effect': hover }">
        Edit
      </button>
      <button class="delete" @click="open = true">
        Delete
      </button>
      <div x-show="open" @click.away="open = false">
        Are you sure you want to delete this post?
        <button class="confirm-delete" @click="yes = true; open = false">Yes</button>
        <button class="cancel-delete" @click="open = false">No</button>
      </div>
    </div>

    <div class="edit-form" style="display: none;">
      <form>
        <input type="hidden" class="uuid">
        <div class="form-group">
          <label for="updateTitle">Title</label>
          <input type="text" class="updateTitle">
        </div>
        <div class="form-group">
          <label for="updateBody">Body</label>
          <textarea class="updateBody"></textarea>
        </div>
        <input type="submit" value="Update">
        <button type="button" class="cancel">Cancel</button>
      </form>
    </div>
  </div>
</template>